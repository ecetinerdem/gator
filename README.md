# ğŸ¹ Gator CLI

Gator is a simple **Go-based command-line tool** that manages user data through a PostgreSQL database.  
It supports operations like registering new users, logging in, listing users, and resetting the user table â€” all through an easy-to-use CLI interface.

---

## âš™ï¸ Features

- âœ… Register new users  
- ğŸ” Log in as an existing user  
- ğŸ§¾ List all users and highlight the current one  
- ğŸ—‘ï¸ Reset (delete) all users  
- ğŸ’¾ Store configuration in a local JSON file (`~/.gatorconfig.json`)  

---

## ğŸ§  Project Structure

```
.
â”œâ”€â”€ cmd/
â”‚   â””â”€â”€ main.go              # Entry point of the program
â”œâ”€â”€ internal/
â”‚   â”œâ”€â”€ config/              # Contains command handlers and state management
â”‚   â”‚   â””â”€â”€ config.go
â”‚   â””â”€â”€ database/            # Generated database access code (from sqlc)
â””â”€â”€ go.mod / go.sum          # Go module dependencies
```

---

## ğŸš€ Getting Started

### 1ï¸âƒ£ Prerequisites

Make sure you have:
- Go 1.20+ installed  
- PostgreSQL running  
- `github.com/lib/pq` installed  
- `sqlc` (optional, if regenerating database code)

---

### 2ï¸âƒ£ Setup

Clone the repository:

```bash
git clone https://github.com/ecetinerdem/gator.git
cd gator
```

Install dependencies:

```bash
go mod tidy
```

---

### 3ï¸âƒ£ Configure the Database

Create a configuration file in your home directory:

```
~/.gatorconfig.json
```

Example content:
```json
{
  "db_url": "postgres://username:password@localhost:5432/gatordb?sslmode=disable",
  "current_user_name": ""
}
```

---

### 4ï¸âƒ£ Run the CLI

Run directly:
```bash
go run ./cmd
```

Or build and execute:
```bash
go build -o gator ./cmd
./gator <command> [args...]
```

---

## ğŸ’» Available Commands

| Command      | Description | Example |
|---------------|-------------|----------|
| `register`    | Create a new user and set them as current | `./gator register alice` |
| `login`       | Log in as an existing user | `./gator login alice` |
| `users`       | List all registered users | `./gator users` |
| `reset`       | Delete all users from the database | `./gator reset` |

---

## ğŸ§© How It Works

- **`main.go`** initializes:
  - The configuration file (`~/.gatorconfig.json`)
  - Database connection
  - Command registry
- **`config` package** defines:
  - `State` â†’ holds app state (config + DB)
  - `Commands` â†’ maps command names to handler functions
  - Handlers like `LoginHandler`, `RegisterHandler`, etc.

Each command handler uses:
```go
func(s *State, cmd Command) error
```
and returns an error if something goes wrong.

---

## ğŸ§° Example Workflow

```bash
# Register a new user
./gator register alice

# Log in as that user
./gator login alice

# List all users
./gator users

# Reset (delete) all users
./gator reset
```

---

## ğŸ˜ Database

This project uses **PostgreSQL** with an internal `database` package generated by `sqlc`.  
Expected SQL schema includes a `users` table with:
- `id` (UUID)
- `name` (string)
- `created_at`
- `updated_at`

---

## âš ï¸ Error Handling

- Unknown command â†’ `unknown command: <name>`  
- Non-existent user â†’ `user <name> does not exist`  
- Missing arguments â†’ descriptive error messages  

---

## ğŸ§‘â€ğŸ’» Author

**E. Ã‡etin Erdem**  
[GitHub: @ecetinerdem](https://github.com/ecetinerdem)

---

## ğŸ“„ License

This project is licensed under the **MIT License**.
